<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.lyf.hotelserver.dao.SiteDao">
<!--    <select id="getHotelByHotelId" resultMap="SiteDO" parameterType="java.lang.String">
        SELECT
         room_id,room_type,room_price,room_picture_path,room_desc,booked,user_id
        FROM table_room tr
        where
          tr.room_id = #{roomId}
    </select>
    <select id="getHotelOrderInfoByHotelId" resultMap="hotelDO" parameterType="java.lang.String">
        SELECT
        room_id,room_type,room_price,room_picture_path,booked,tr.user_id,guests,user_name
        FROM table_room tr,table_user tu
        where
        tr.user_id = tu.user_id AND tr.room_id = #{roomId}
    </select>-->
    <resultMap id="SiteDO" type="cn.lyf.hotelserver.entity.SiteDO" autoMapping="true">
        <result column="site_name" property="siteName"/>
        <result column="site_describe" property="siteDescribe"/>
        <result column="site_address" property="siteAddress"/>
        <result column="visit_times" property="visitTimes"/>
        <result column="site_picture_path" property="sitePicturePath"/>
        <result column="site_grade" property="siteGrade"/>
        <result column="site_cost" property="siteCost"/>
    </resultMap>


    <insert id="addSite" useGeneratedKeys="true" keyProperty="id">
        insert into table_tourist_spots(site_name,site_describe,site_address,visit_times,site_picture_path)
        values(#{siteName},#{siteDescribe},#{siteAddress},#{visitTimes},#{sitePicturePath})
    </insert>
    <select id="listSites" resultMap="SiteDO">
       SELECT
         id,site_name,site_describe,site_address,visit_times,site_picture_path,site_grade
        FROM table_tourist_spots
        WHERE status = '0'
    </select>

    <!--最热门的前六个景点查询-->
    <select id="listHotSites" resultMap="SiteDO">
        SELECT
        id,site_name,site_describe,site_address,visit_times,site_picture_path,site_grade
        FROM table_tourist_spots
        WHERE status = '0' ORDER BY visit_times DESC
    </select>

    <select id="getSiteById" resultMap="SiteDO">
        SELECT
        id,site_name,site_describe,site_address,visit_times,site_picture_path,site_grade
        FROM table_tourist_spots
        WHERE status = '0' and id = #{id}
    </select>

<!--
    <update id="updateHotel">
        UPDATE table_room
        <set>
            <if test="roomType != null">room_type = #{roomType},</if>
            <if test="roomPrice != null">room_price = #{roomPrice},</if>
            <if test="roomPicturePath != null">room_picture_path = #{roomPicturePath},</if>
            <if test="booked != null">booked = #{booked},</if>
            <if test="userId != null">user_id = #{userId},</if>
            <if test="userId != null">start_date = #{startDate},</if>
            <if test="userId != null">end_date = #{endDate}</if>
        </set>
        where room_id = #{roomId}
    </update>-->

</mapper>